--- a/metadata.c
+++ b/metadata.c
@@ -484,12 +484,12 @@
 }
 
 /* For libjpeg error handling */
-jmp_buf setjmp_buffer;
+jmp_buf metadata_setjmp_buffer;
 static void
 libjpeg_error_handler(j_common_ptr cinfo)
 {
 	cinfo->err->output_message (cinfo);
-	longjmp(setjmp_buffer, 1);
+	longjmp(metadata_setjmp_buffer, 1);
 	return;
 }
 
@@ -613,7 +613,7 @@
 			cinfo.err = jpeg_std_error(&jerr);
 			jerr.error_exit = libjpeg_error_handler;
 			jpeg_create_decompress(&cinfo);
-			if( setjmp(setjmp_buffer) )
+			if( setjmp(metadata_setjmp_buffer) )
 				goto error;
 			jpeg_stdio_src(&cinfo, infile);
 			jpeg_read_header(&cinfo, TRUE);
